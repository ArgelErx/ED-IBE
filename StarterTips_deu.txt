ED - Intelligent Boardcomputer Extension

Inhalt: 
   * Voraussetzungen

   * Kurzanleitung/Starter-Tipps
		1. Installation 
		2. Starten
		3. Ex-/Import von Daten
		4. Übersetzungen
		5. Tabellenansichten
		6. Comboboxen
		7. Service-Formular SQL
		8. EDDN
		9. Berücksichtigung der Systeme/Stationen !!!!!!!

	* FAQ
		Q: bei der Preisanalyse werden keine/zu wenig Stationen angezeigt
		Q: Absturz beim Starten von ED-IBE?
		Q: Absturz beim Verarbeiten der Screenshots?
		Q: Crash, wenn der EDDN-Listener aktviert wird ?
		Q: Allgemein schlechte Erkennung der Zahlen ?
		Q: "8" wird oft als "6" erkannt oder anders herum ?
		
Voraussetzungen:
- Win7 oder höher, x64
- Microsoft dotNet 4.6
- Microsoft Visual Studio 2013 C++ Runtimes (https://www.microsoft.com/en-gb/download/details.aspx?id=40784)
- Visual Studio 2012 C++ Redistributables (x86 und x64) (https://www.microsoft.com/en-us/download/details.aspx?id=30679)

Kurzanleitung/Starter-Tipps

1. Installation 
Standardmäßig installiert sich das Programm zu Hälfte in das Programme-
verzeichnis (C:\Program Files\ED-IBE) und zur Hälfte in das Data-Verzeichnis
(C:\Users\{USER}\AppData\Local\ED-IBE). Diese Pfade können während der Installation 
angepasst werden. Es kann auch für beide Teile das gleiche Verzeichnis angegeben werden
(z. B. "F:\ED-IBE").


Am Ende der Installation sollte für ein paar Augenblicke ein cmd-Fenster aufgehen.
Während dieser Zeit wird die Datenbankstruktur erstellt. Wenn dieses Fenster nicht erscheint, 
stimmt etwas nicht. Evtl. die Installation in einem anderen Zielverzeichnis erneut versuchen.
Ein Log hiervon ist im Data-Verzeichnis zu finden, falls hierbei Probleme auftreten.
(ED-IBE\Database\install.log). 

Sollte eine erneute Installation durchgeführt werden (z.B. bei einem Update) erkennt 
die Installationsroutine eine bestehende Datenbank anhand der Existenz der Datei "\ED-IBE\Database\data\ibdata1".
Die Datenbank wird dann unverändert beibehalten, solange bei der Installation nicht explizit 
das "Löschen und Neuerstellen" ausgewählt wird. 
Fall etwas schiefgeht und man die Datenbank einmal löschen möchte, muss man 
die Installation erneut durchführen und die Checkbox zum "Löschen und Neuerstellen" markieren.


2. Starten
Wenn ED-IBE gestartet wird, wird automatisch der Datenbankprozess mitgestartet ("mysqld.exe" im Taskmanager).
Wird ED-IBE beendet, wird auch der Datenbankprozess mit beendet (Ausnahme: Der Datenbankprozess war 
schon vor dem Start von ED-IBE vorhanden.)

Beim ersten Start werden auch die derzeit bekannten Waren, Systeme und Stationen aus den mitgelieferten
EDDN-Dumpfiles importiert und weitere benötigte Stammdaten angelegt. 
(siehe hierzu auch unter 3. : "Import data of systems/stations/commodities from EDDB-Files") 

Tipp: am besten als erstes auf die eigene Sprache umstellen (Settings)
Leider betrifft dies nur die Warennamen, aber so ist es möglich 
auch OCR-Ergebnisse in der eigenen Sprache zu importieren. 

3. Ex-/Import von Daten (Menüpunkt "Data"->"Import")

"EDDB imports"
Dieser Punkt bietet die Möglichkeit die Stammdaten zu aktualisieren.

-> Bei ersten Start von ED-IBE wird dieser Import automatisch ausgeführt *)
-> Bei einem Update von ED-IBE werden diese Daten ebenfalls automatisch aktualisiert *)
*) mit den mitgelieferten EDDB-Dumps - diese müssen nicht die akuellsten Daten enthalten.

Es können die neuesten Dumpfiles von der EDDB-Seite heruntergeladen und
importiert werden. Die Dateien werden im persönlichen temp-Ordner abgelegt 
(.{User}\AppData\local\temp\ED-IBE\) und nur heruntergeladen, wenn auf
https://eddb.io/api neuere Dateien verfügbar sind.

Alternativ können auch manuell bereitgestellt Dumpfiles aus einem 
zu wählenden Ordner importiert werden.

Es werden normalerweise keine Preisdaten importiert/aktualisiert.
Durch Auswahl der Importoptionen kann man jedoch ein Starter-Kit
(Preisdaten im Umkreis von 20 Lichtjahren um die aktuelle Schiffsposition)
oder auch den gesamten aktuellen Preis-Datenbestand der EDDB importieren.
Achtung: Der Gesamtimport kann durchaus mehrere Stunden dauern.

Beim Import des "Starter-Kits" weden die betreffenden Systeme automatisch
zur Liste der besuchten Systeme hinzugefügt (siehe 9. "Berücksichtigung der Systeme/Stationen")

"Import Old Datafiles"
Über "Import Old Datafiles" können die Datenbestände aus dem alten RN übernommen werden.

Mit "Import RN-CommandersLog Files" können gesplittete Logfiles von RN wieder eingelesen werden.
Voraussetzung ist, dass die einzelnen Dateien nach dem Muster "CommandersLog*.xml" benannt sind.
Mehrfachimport wird durch Abgleich des Zeitstempels verhindert.

"Market Data (CSV)"
Bietet die Ex- und Importmöglichkeit über CSV-Dateien.
Gut geeignet zum Datenaustausch mit Freunden.

4. Übersetzungen
Unter "Data"->"Edit Localization" kann man die Übersetzungen ansehen, editieren, importieren und exportieren.
Leider betrifft dies nur die Warennamen, aber so ist es möglich auch OCR-Ergebnisse in der eigenen Sprache zu importieren. 
Auch das Hinzufügen einer weiteren Sprache ist möglich. Hierzu die Übersetzungen exportieren, dann in der csv-Datei 
die neuen Spracheinträge hinzufügenund danach die geänderte csv-Datei wieder importieren. 
Nicht vorhandenen Übersetzungen einer neuen Sprache werden mit der englischen Bezeichnung ergänzt 
und können dann später korrigiert werden.

Beispiel: 
von:
1;eng;Explosives
1;ger;Sprengstoffe
1;fra;Explosifs

nach:
1;eng;Explosives
1;ger;Sprengstoffe
1;fra;Explosifs
1;spa;<spanischer Name>


5. Tabellenansichten
Durch einen Rechtsklick auf den Tabellenheader (linkes oberes kleines Feld)
öffnet sich ein Dialog, mit dem die Tabellenansicht angepasst werden kann.
Die Breite der Spalten können auch per Drag'n'Drop angepasst werden.
Durch ein kurzes Öffnen des Dialogs werden diese Spalteneinstellungen dann auch übernommen.


6. Comboboxen
Die ComboBoxen habe zwar feste Einträge. In vielen Fällen hat man aber die Möglichkeit 
beliebige eigene Werte einzutragen (z.B. bei "Max. Trip Distance")


7. Service-Formular SQL
Unter gibt es die Möglichkeit direkt Sql-Befehle abzusetzen.
Diese Möglichkeit wurde zur Fehlersuche und für Service-Tätigkeiten geschaffen.
Wenn man sich nicht sicher ist, dann lieber die Finger davon lassen.
Es besteht die Möglichkeit, interne Daten zu zerstören.
Wenn mehrere Befehle eingetragen sind, kann man diese durch Selektion gezielt
zum Ausführen auswählen.


8. EDDN
Das EDDN-Interface ist standardmäßig deaktiviert. Über Settings->EDDN-Interface
kann der Empfang und/oder das Senden von EDDN-Nachrichten aktiviert werden.
Um EDDN-Daten automatisch beim nächsten Start zu empfangen, müssen
"import received data into database" und "autostart listening on program start"
aktiviert werden. Bitte hierzu auch Punkt 9. berücksichtigen
Für das Senden von Daten in das EDDN gilt das gleiche.

Um Datenmüll auszufiltern beträgt das Zeitfenster für gültige Daten +- 5 Minuten - 
die Uhrzeit des eigenen Rechners sollte also einigermaßen stimmen. Mehrfach eingehende
Daten (Station+Ware) vom EDDN werden innerhalb eines 5-Minuten-Zeitraumes ebenfalls gefiltert.


9. Berücksichtigung der Systeme/Stationen !!!!!!!
ED-IBE berücksichtigt im Normalfall nur Daten von Systeme, die bereits selbst besucht wurden !
Es können jedoch weitere Daten vorhanden sein (über den manuellen CSV-Import oder über das EDDN-Interface).
Über diesen Mechanismus kann man sich bewußt gegen das Sammeln von Preisdaten unbekannter Systeme entscheiden,
aber trotzdem Aktualisierungen von Preisen der besuchten Systeme über EDDN empfangen.

Hinweis: Wer seine alten RN-Daten importiert, fügt auch die Einträge in die Liste der besuchten Systeme hinzu.
Grundlage hierfür ist beim Import das "Commander's Log" sowie die "StationHistory" von "RegulatedNoise DJ".


FAQ:
*************************************************************************
Q: bei der Preisanalyse werden keine/zu wenig Stationen angezeigt

A1: Als Standard ist ein Filter aktiv, der nur Daten von bereits besuchten 
Systemen berücksichtigt. Um mehr Systeme zu berücksichtigen (z.B. von EDDN oder EDDB), 
müssen die Systeme bereist werden (der Normalfall, wenn man selber die Daten sammeln möchte)
oder der Filter muss in den Settings deaktiviert werden (-> Datafilter)
Siehe auch "9. Berücksichtigung der Systeme/Stationen"

A2: Die Filterreinstellungen sind falsch gewählt (z.B "Distance To Star" oder der Zeitfilter etc.)

*************************************************************************
Q: Absturz beim Starten von ED-IBE?

A1: Eventuell ist der Datenteil von ED-IBE in einem Verzeichnis installiert, das mit hohen Zugriffs-Restriktionen ausgestattet ist, 
wie z. B. "C:\Programme\....". ED-IBE benötigt aber in jedem Fall Schreibzugriff auf die Log-Dateien etc. 
Lösung : Den Datenteil von ED-IBE  in einem Verzeichnis installieren, in dem keinerlei Zugriffs-Restriktionen
bestehen, wie dem vorgeschlagenen Standardpfad (Userverzecihnis) oder z. B. D:\Games\...."

A2: Die Datenbank wurde bei der Installation nicht angelegt. 
Siehe unter "1) Installation" der "Startertipps"

*************************************************************************
Q: Absturz beim Verarbeiten der Screenshots?

A1: Die OCR-Funktionalität erfordert "Visual Studio 2012 C++ Redistributables" für x86 UND x64, 
Download => https://www.microsoft.com/en-us/download/details.aspx?id=30679

A2: Du hast eine Sicherheits-Suite wie "360 Internet Security", "Norton Internet Security" oder 
ein anderes Anti-Viren-Tool mit einer Blockierfunktion installiert
Versuche, das Tool (temporär) zu deaktivieren und prüfe, ob das Problem behoben ist. Wenn es jetzt geht, 
versuche das Programm "nn_training.exe" (zu finden im "\Brainerous\" Unterordner) auf eine WhiteList zu setzen.

A3: Du hast vielleicht zuvor schon mal "Tesseract OCR" installiert. Zum Testen einfach
mal in in cmd-Fenster "echo %TESSDATA_PREFIX%" eingeben und prüfen, ob ein Pfad angezeigt wird.
Wenn ja, entweder "Tesseract OCR" deinstallieren (auch sicherstellen, dass  TESSDATA_PREFIX gelöscht wird)
ODER die "*.traineddata"-Dateien aus dem ".\tessdata\"-Unterverzeichnis in das Verzeichnis kopieren, auf das TESSDATA_PREFIX verweist.

*************************************************************************
Q: Crash, wenn der EDDN-Listener aktviert wird ?
A1: 
Die genutzte ZeroMQ-Komponente benötigt "Microsoft Visual Studio 2013 C++ Runtimes"
Download => [url]https://www.microsoft.com/en-gb/download/details.aspx?id=40784[/url]

*************************************************************************
Q: Allgemein schlechte Erkennung der Zahlen ?
A: Schlechte Kalibrierung ? Schau in das "\Brainerous\images" Unterverzeichnis. Sind die Zahlen abgeschnitten
muss die OCR-Kalibrierung wiederholt und die Positionierung verbessert werden.

*************************************************************************
Q: "8" wird oft als "6" erkannt oder anders herum ?
A1: Das ist bekannt, aber im Moment leider nicht zu verhindern . Es sollte aber nicht zu häufig vorkommen -
vielleicht alle 4 bis 8 (?) Screenshots. Du kannst versuchen, die Erkennung zu verbessern, in dem der "UI Color Cutoff Level"
verändert wird. Versuch Werte, durch die die Ziffern ein wenig dünner werden, um die Unterscheidbarkeit von "6" und "8" zu verbessern.
Aber darauf achten, dass die Ziffern nicht anfangen Unterbrechungen in der Kontur zu bekommen.



